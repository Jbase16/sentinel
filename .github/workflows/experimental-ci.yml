name: Experimental CI

# Minimal CI for experimental branches
# Non-blocking, informational only

on:
  push:
    branches:
      - 'experiment/**'
      - 'spike/**'
      - 'poc/**'

jobs:
  informational-checks:
    name: Informational Checks
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: Check syntax
        run: |
          echo "üîç Checking Python syntax..."
          python -m py_compile core/**/*.py || echo "‚ö†Ô∏è  Syntax errors found (non-blocking)"

      - name: Security scan (non-blocking)
        run: |
          echo "üîí Security patterns (informational)..."

          # Non-blocking security checks
          grep -r "shell=True" core/ --include="*.py" || true
          grep -r "eval(" core/ --include="*.py" || true

          echo "‚ö†Ô∏è  This is an experimental branch - security checks are informational only"

      - name: Run quick tests
        run: |
          pip install -r requirements.txt || echo "‚ö†Ô∏è  Dependency installation failed"
          pip install pytest || true
          pytest tests/unit/ -x || echo "‚ö†Ô∏è  Tests failed (non-blocking)"

  experimental-summary:
    name: Experimental Summary
    runs-on: ubuntu-latest
    needs: informational-checks
    if: always()

    steps:
      - name: Summary
        run: |
          echo "üß™ Experimental CI Complete"
          echo ""
          echo "This branch is for experimentation."
          echo "All checks are non-blocking and informational only."
          echo ""
          echo "Status: ${{ needs.informational-checks.result }}"
